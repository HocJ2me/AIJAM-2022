function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _instanceof(e,s){return null!=s&&"undefined"!=typeof Symbol&&s[Symbol.hasInstance]?!!s[Symbol.hasInstance](e):e instanceof s}define("discourse/plugins/discourse-assign/discourse-assign/assigned-group-route-map",["exports"],(function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={resource:"group",map:function(){this.route("assigned",(function(){this.route("show",{path:"/:filter"})}))}}})),define("discourse/plugins/discourse-assign/discourse-assign/assigned-messages-route-map",["exports"],(function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={resource:"user.userPrivateMessages",map:function(){this.route("assigned")}}})),define("discourse/plugins/discourse-assign/discourse-assign/assigns-activity-route-map",["exports"],(function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={resource:"user.userActivity",map:function(){this.route("assigned")}}})),Ember.TEMPLATES["javascripts/discourse-assign/connectors/above-review-filters/assigned-to-filter"]=Ember.HTMLBars.template({id:null,block:'[[[10,0],[14,0,"reviewable-filter discourse-assign-assign-to-filter"],[12],[1,"\\n  "],[10,"label"],[14,0,"filter-label"],[12],[1,[28,[35,0],["discourse_assign.assigned_to"],null]],[13],[1,"\\n  "],[1,[28,[35,1],null,[["value","onChange","autocomplete","options"],[[33,2,["assigned_to"]],[28,[37,3],[[30,0],"updateAssignedTo"],null],"off",[28,[37,4],null,[["maximum","fullWidthWrap","filterPlaceholder","includeGroups","groupMembersOf"],[1,true,[33,5],false,[33,6]]]]]]]],[1,"\\n"],[13],[1,"\\n"]],[],false,["i18n","email-group-user-chooser","additionalFilters","action","hash","placeholderKey","allowedGroups"]]',moduleName:"javascripts/discourse-assign/connectors/above-review-filters/assigned-to-filter",isStrictMode:!1}),define("discourse/plugins/discourse-assign/discourse-assign/connectors/above-review-filters/assigned-to-filter",["exports","@ember/object"],(function(e,s){"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i,r,o,a,l,u=(n=t={updateAssignedTo:function(e){this.set("additionalFilters.assigned_to",e.firstObject)},shouldRender:function(e){return e.additionalFilters},setupComponent:function(e,s){var t=(s.siteSettings.assign_allowed_on_groups||"").split("|").filter(Boolean),n=this.site.groups.filter((function(e){return t.includes(e.id.toString())})).mapBy("name");s.set("allowedGroups",n)}},i="updateAssignedTo",r=[s.action],o=Object.getOwnPropertyDescriptor(t,"updateAssignedTo"),a=t,l={},Object.keys(o).forEach((function(e){l[e]=o[e]})),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=r.slice().reverse().reduce((function(e,s){return s(n,i,e)||e}),l),a&&void 0!==l.initializer&&(l.value=l.initializer?l.initializer.call(a):void 0,l.initializer=void 0),void 0===l.initializer&&(Object.defineProperty(n,i,l),l=null),t);e.default=u})),Ember.TEMPLATES["javascripts/discourse-assign/connectors/advanced-search-options-below/assigned-advanced-search"]=Ember.HTMLBars.template({id:null,block:'[[[10,0],[14,0,"control-group"],[12],[1,"\\n  "],[10,"label"],[14,0,"control-label"],[14,"for","search-assigned-to"],[12],[1,[28,[35,0],["search.advanced.assigned.label"],null]],[13],[1,"\\n  "],[10,0],[14,0,"controls"],[12],[1,"\\n    "],[1,[28,[35,1],null,[["value","onChange","options"],[[33,2,["assigned"]],[28,[37,3],[[30,0],"onChangeAssigned"],null],[28,[37,4],null,[["maximum","excludeCurrentUser","includeGroups","customSearchOptions"],[1,false,true,[28,[37,4],null,[["assignableGroups"],[true]]]]]]]]]],[1,"\\n  "],[13],[1,"\\n"],[13],[1,"\\n"]],[],false,["i18n","email-group-user-chooser","searchedTerms","action","hash"]]',moduleName:"javascripts/discourse-assign/connectors/advanced-search-options-below/assigned-advanced-search",isStrictMode:!1}),define("discourse/plugins/discourse-assign/discourse-assign/connectors/advanced-search-options-below/assigned-advanced-search",["exports","@ember/object"],(function(e,s){"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i,r,o,a,l,u=(n=t={shouldRender:function(e,s){var t;return null===(t=s.currentUser)||void 0===t?void 0:t.can_assign},onChangeAssigned:function(e){this.onChangeSearchedTermField("assigned","updateSearchTermForAssignedUsername",e)}},i="onChangeAssigned",r=[s.action],o=Object.getOwnPropertyDescriptor(t,"onChangeAssigned"),a=t,l={},Object.keys(o).forEach((function(e){l[e]=o[e]})),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=r.slice().reverse().reduce((function(e,s){return s(n,i,e)||e}),l),a&&void 0!==l.initializer&&(l.value=l.initializer?l.initializer.call(a):void 0,l.initializer=void 0),void 0===l.initializer&&(Object.defineProperty(n,i,l),l=null),t);e.default=u})),Ember.TEMPLATES["javascripts/discourse-assign/connectors/category-custom-settings/assign-settings"]=Ember.HTMLBars.template({id:null,block:'[[[10,"h3"],[12],[1,[28,[35,0],["discourse_assign.assign.title"],null]],[13],[1,"\\n"],[10,"section"],[14,0,"field"],[12],[1,"\\n  "],[10,0],[14,0,"enable-accepted-answer"],[12],[1,"\\n    "],[10,"label"],[14,0,"checkbox-label"],[12],[1,"\\n      "],[1,[28,[35,1],null,[["type","checked","change"],["checkbox",[28,[37,2],[[33,3,["enable_unassigned_filter"]]],null],[28,[37,4],[[30,0],"onChangeSetting"],[["value"],["target.checked"]]]]]]],[1,"\\n      "],[1,[28,[35,0],["discourse_assign.add_unassigned_filter"],null]],[1,"\\n    "],[13],[1,"\\n  "],[13],[1,"\\n"],[13],[1,"\\n"]],[],false,["i18n","input","readonly","category","action"]]',moduleName:"javascripts/discourse-assign/connectors/category-custom-settings/assign-settings",isStrictMode:!1}),define("discourse/plugins/discourse-assign/discourse-assign/connectors/category-custom-settings/assign-settings",["exports","@ember/object"],(function(e,s){"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i,r,o,a,l,u=(n=t={onChangeSetting:function(e){this.set("category.custom_fields.enable_unassigned_filter",e?"true":"false")}},i="onChangeSetting",r=[s.action],o=Object.getOwnPropertyDescriptor(t,"onChangeSetting"),a=t,l={},Object.keys(o).forEach((function(e){l[e]=o[e]})),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=r.slice().reverse().reduce((function(e,s){return s(n,i,e)||e}),l),a&&void 0!==l.initializer&&(l.value=l.initializer?l.initializer.call(a):void 0,l.initializer=void 0),void 0===l.initializer&&(Object.defineProperty(n,i,l),l=null),t);e.default=u})),Ember.TEMPLATES["javascripts/discourse-assign/connectors/group-reports-nav-item/assigned-topic-list"]=Ember.HTMLBars.template({id:null,block:'[[[1,[28,[35,0],null,[["group"],[[33,1]]]]],[1,"\\n"]],[],false,["group-assigned-menu-item","group"]]',moduleName:"javascripts/discourse-assign/connectors/group-reports-nav-item/assigned-topic-list",isStrictMode:!1}),define("discourse/plugins/discourse-assign/discourse-assign/connectors/group-reports-nav-item/assigned-topic-list",["exports"],(function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={shouldRender:function(e,s){return s.currentUser&&s.currentUser.can_assign&&e.group.can_show_assigned_tab&&e.group.assignment_count>0}}})),Ember.TEMPLATES["javascripts/discourse-assign/connectors/groups-interaction-custom-options/assignable-interaction-fields"]=Ember.HTMLBars.template({id:null,block:'[[[10,0],[14,0,"control-group"],[12],[1,"\\n  "],[10,"label"],[14,0,"control-label"],[12],[1,[28,[35,0],["discourse_assign.admin.groups.manage.interaction.assign"],null]],[13],[1,"\\n  "],[10,"label"],[14,"for","visiblity"],[12],[1,[28,[35,0],["discourse_assign.admin.groups.manage.interaction.assignable_levels.title"],null]],[13],[1,"\\n\\n  "],[1,[28,[35,1],null,[["name","valueProperty","value","content","class","onChange"],["alias","value",[33,2],[33,3],"groups-form-assignable-level",[28,[37,4],[[30,0],[28,[37,5],[[33,6,["assignable_level"]]],null]],null]]]]],[1,"\\n"],[13],[1,"\\n"]],[],false,["i18n","combo-box","assignableLevel","assignableLevelOptions","action","mut","model"]]',moduleName:"javascripts/discourse-assign/connectors/groups-interaction-custom-options/assignable-interaction-fields",isStrictMode:!1}),define("discourse/plugins/discourse-assign/discourse-assign/connectors/groups-interaction-custom-options/assignable-interaction-fields",["exports","I18n","@ember/object/computed","@ember/object"],(function(e,s,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"assignable-interaction-fields",setupComponent:function(e,i){this.assignableLevelOptions=[{name:s.default.t("groups.alias_levels.nobody"),value:0},{name:s.default.t("groups.alias_levels.only_admins"),value:1},{name:s.default.t("groups.alias_levels.mods_and_admins"),value:2},{name:s.default.t("groups.alias_levels.members_mods_and_admins"),value:3},{name:s.default.t("groups.alias_levels.owners_mods_and_admins"),value:4},{name:s.default.t("groups.alias_levels.everyone"),value:99}],(0,n.defineProperty)(i,"assignableLevel",(0,t.or)("model.assignable_level","assignableLevelOptions.firstObject.value"))}};e.default=i})),Ember.TEMPLATES["javascripts/discourse-assign/connectors/user-activity-bottom/assigned-list"]=Ember.HTMLBars.template({id:null,block:'[[[41,[33,1,["can_assign"]],[[[6,[39,2],null,[["route"],["userActivity.assigned"]],[["default"],[[[[1,"    "],[1,[28,[35,3],["user-plus"],null]],[1," "],[1,[28,[35,4],["discourse_assign.assigned"],null]],[1,"\\n"]],[]]]]]],[]],null]],[],false,["if","currentUser","link-to","d-icon","i18n"]]',moduleName:"javascripts/discourse-assign/connectors/user-activity-bottom/assigned-list",isStrictMode:!1}),Ember.TEMPLATES["javascripts/discourse-assign/connectors/user-messages-nav/assigned-messages"]=Ember.HTMLBars.template({id:null,block:'[[[6,[39,0],null,[["route","model"],["userPrivateMessages.assigned",[33,1]]],[["default"],[[[[1,"  "],[1,[28,[35,2],["user-plus"],[["class"],["glyph"]]]],[1,"\\n  "],[1,[28,[35,3],["discourse_assign.assigned"],null]],[1,"\\n"]],[]]]]]],[],false,["link-to","model","d-icon","i18n"]]',moduleName:"javascripts/discourse-assign/connectors/user-messages-nav/assigned-messages",isStrictMode:!1}),define("discourse/plugins/discourse-assign/discourse-assign/connectors/user-messages-nav/assigned-messages",["exports"],(function(e){"use strict";function s(e,s){return s.currentUser&&s.currentUser.get("can_assign")&&(!s.get("site.mobileView")||e.model.get("isPrivateMessage"))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.shouldShowAssigned=s;var t={shouldRender:function(e,t){return s(e,t)}};e.default=t})),Ember.TEMPLATES["javascripts/discourse-assign/connectors/user-preferences-notifications/remind-assigns-frequency"]=Ember.HTMLBars.template({id:null,block:'[[[1,[28,[35,0],null,[["user"],[[33,1]]]]],[1,"\\n"]],[],false,["remind-assigns-frequency","model"]]',moduleName:"javascripts/discourse-assign/connectors/user-preferences-notifications/remind-assigns-frequency",isStrictMode:!1}),define("discourse/plugins/discourse-assign/discourse-assign/connectors/user-preferences-notifications/remind-assigns-frequency",["exports"],(function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={shouldRender:function(e,s){return s.currentUser&&s.currentUser.get("can_assign")}}})),define("discourse/plugins/discourse-assign/discourse-assign/controllers/assign-user",["exports","@ember/controller","@ember/object","@ember/object/computed","@ember/service","@ember/utils","discourse/lib/ajax","discourse/lib/ajax-error"],(function(e,s,t,n,i,r,o,a){"use strict";var l;function u(e,s,t,n,i){var r={};return Object.keys(n).forEach((function(e){r[e]=n[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=t.slice().reverse().reduce((function(t,n){return n(e,s,t)||t}),r),i&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(i):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,s,r),r=null),r}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=s.default.extend((l={topicBulkActions:(0,s.inject)(),assignSuggestions:null,allowedGroups:null,taskActions:(0,i.inject)(),autofocus:(0,n.not)("capabilities.touch"),assigneeName:(0,n.or)("model.username","model.group_name"),init:function(){var e=this;this._super.apply(this,arguments),this.allowedGroups=[],(0,o.ajax)("/assign/suggestions").then((function(s){e.isDestroying||e.isDestroyed||(e.set("assignSuggestions",s.suggestions),e.set("allowedGroups",s.assign_allowed_on_groups),e.set("allowedGroupsForAssignment",s.assign_allowed_for_groups))}))},onClose:function(){this.get("model.onClose")&&this.get("model.username")&&this.get("model.onClose")(this.get("model.username"))},bulkAction:function(e){this.topicBulkActions.performAndRefresh({type:"assign",username:e})},assign:function(){var e=this;if(!this.isBulkAction){var s="/assign/assign";return(0,r.isEmpty)(this.get("model.username"))&&this.model.target.set("assigned_to_user",null),(0,r.isEmpty)(this.get("model.group_name"))&&this.model.target.set("assigned_to_group",null),(0,r.isEmpty)(this.get("model.username"))&&(0,r.isEmpty)(this.get("model.group_name"))&&(s="/assign/unassign"),this.send("closeModal"),(0,o.ajax)(s,{type:"PUT",data:{username:this.get("model.username"),group_name:this.get("model.group_name"),target_id:this.get("model.target.id"),target_type:this.get("model.targetType"),note:this.get("model.note")}}).then((function(){var s;null===(s=e.get("model.onSuccess"))||void 0===s||s()})).catch(a.popupAjaxError)}this.bulkAction(this.model.username)},assignUser:function(e){if(!this.isBulkAction)return this.setGroupOrUser(e),e?this.assign():void 0;this.bulkAction(e)},assignUsername:function(e){this.isBulkAction?this.bulkAction(e.firstObject):this.setGroupOrUser(e.firstObject)},setGroupOrUser:function(e){this.allowedGroupsForAssignment.includes(e)?this.setProperties({"model.username":null,"model.group_name":e,"model.allowedGroups":this.taskActions.allowedGroups}):this.setProperties({"model.username":e,"model.group_name":null,"model.allowedGroups":this.taskActions.allowedGroups})}},u(l,"assign",[t.action],Object.getOwnPropertyDescriptor(l,"assign"),l),u(l,"assignUser",[t.action],Object.getOwnPropertyDescriptor(l,"assignUser"),l),u(l,"assignUsername",[t.action],Object.getOwnPropertyDescriptor(l,"assignUsername"),l),l));e.default=c})),define("discourse/plugins/discourse-assign/discourse-assign/controllers/group-assigned-show",["exports","discourse/controllers/user-topics-list","@ember/object/computed","discourse-common/lib/debounce","discourse-common/config/environment","@ember/controller","@ember/service","@ember/object"],(function(e,s,t,n,i,r,o,a){"use strict";var l;function u(e,s,t,n,i){var r={};return Object.keys(n).forEach((function(e){r[e]=n[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=t.slice().reverse().reduce((function(t,n){return n(e,s,t)||t}),r),i&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(i):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,s,r),r=null),r}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=s.default.extend((l={user:(0,r.inject)(),taskActions:(0,o.inject)(),order:"",ascending:!1,search:"",bulkSelectEnabled:!1,selected:[],canBulkSelect:(0,t.alias)("currentUser.staff"),queryParams:["order","ascending","search"],_setSearchTerm:function(e){this.set("search",e),this.refreshModel()},refreshModel:function(){var e=this;this.set("loading",!0),this.store.findFiltered("topicList",{filter:this.model.filter,params:{order:this.order,ascending:this.ascending,search:this.search,direct:this.model.params.direct}}).then((function(s){return e.set("model",s)})).finally((function(){e.set("loading",!1)}))},unassign:function(e){var s=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Topic";this.taskActions.unassign(e,t).then((function(){return s.send("changeAssigned")}))},reassign:function(e){var s=this;this.taskActions.assign(e).set("model.onSuccess",(function(){return s.send("changeAssigned")}))},changeSort:function(e){e===this.order?(this.toggleProperty("ascending"),this.refreshModel()):(this.setProperties({order:e,ascending:!1}),this.refreshModel())},onChangeFilter:function(e){(0,n.default)(this,this._setSearchTerm,e,2*i.INPUT_DELAY)},toggleBulkSelect:function(){this.toggleProperty("bulkSelectEnabled")},refresh:function(){this.refreshModel()}},u(l,"unassign",[a.action],Object.getOwnPropertyDescriptor(l,"unassign"),l),u(l,"reassign",[a.action],Object.getOwnPropertyDescriptor(l,"reassign"),l),u(l,"changeSort",[a.action],Object.getOwnPropertyDescriptor(l,"changeSort"),l),u(l,"onChangeFilter",[a.action],Object.getOwnPropertyDescriptor(l,"onChangeFilter"),l),u(l,"toggleBulkSelect",[a.action],Object.getOwnPropertyDescriptor(l,"toggleBulkSelect"),l),u(l,"refresh",[a.action],Object.getOwnPropertyDescriptor(l,"refresh"),l),l));e.default=c})),define("discourse/plugins/discourse-assign/discourse-assign/controllers/group-assigned",["exports","@ember/service","@ember/controller","@ember/object","discourse/lib/ajax","discourse-common/utils/decorators","discourse-common/lib/debounce","discourse-common/config/environment"],(function(e,s,t,n,i,r,o,a){"use strict";var l,u,c,d,g;function p(e,s,t,n,i){var r={};return Object.keys(n).forEach((function(e){r[e]=n[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=t.slice().reverse().reduce((function(t,n){return n(e,s,t)||t}),r),i&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(i):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,s,r),r=null),r}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var f=t.default.extend((l=(0,r.default)("router.currentRoute.queryParams.order"),u=(0,r.default)("router.currentRoute.queryParams.ascending"),c=(0,r.default)("router.currentRoute.queryParams.search"),d=(0,r.default)("site.mobileView"),p(g={router:(0,s.inject)(),application:(0,t.inject)(),loading:!1,offset:0,filterName:"",filter:"",order:function(e){return e||""},ascending:function(e){return e||!1},search:function(e){return e||""},isDesktop:function(e){return!e},_setFilter:function(e){var s=this;this.set("loading",!0),this.set("offset",0),this.set("filter",e);var t=this.group.name;(0,i.ajax)("/assign/members/".concat(t),{type:"GET",data:{filter:this.filter,offset:this.offset}}).then((function(e){"everyone"!==s.router.currentRoute.params.filter&&s.transitionToRoute("group.assigned.show",t,"everyone"),s.set("members",e.members)})).finally((function(){s.set("loading",!1)}))},findMembers:function(e){var s=this;e?this.set("members",this.model.members):!this.loading&&this.model&&this.model.members.length>=this.offset+50&&(this.set("loading",!0),this.set("offset",this.offset+50),(0,i.ajax)("/assign/members/".concat(this.group.name),{type:"GET",data:{filter:this.filter,offset:this.offset}}).then((function(e){s.members.pushObjects(e.members)})).finally((function(){return s.set("loading",!1)})))},loadMore:function(){this.findMembers()},onChangeFilterName:function(e){(0,o.default)(this,this._setFilter,e,2*a.INPUT_DELAY)}},"order",[l],Object.getOwnPropertyDescriptor(g,"order"),g),p(g,"ascending",[u],Object.getOwnPropertyDescriptor(g,"ascending"),g),p(g,"search",[c],Object.getOwnPropertyDescriptor(g,"search"),g),p(g,"isDesktop",[d],Object.getOwnPropertyDescriptor(g,"isDesktop"),g),p(g,"loadMore",[n.action],Object.getOwnPropertyDescriptor(g,"loadMore"),g),p(g,"onChangeFilterName",[n.action],Object.getOwnPropertyDescriptor(g,"onChangeFilterName"),g),g));e.default=f})),define("discourse/plugins/discourse-assign/discourse-assign/controllers/user-activity-assigned",["exports","discourse/controllers/user-topics-list","discourse-common/utils/decorators","discourse-common/lib/debounce","discourse-common/config/environment","@ember/controller","@ember/service","@ember/object","discourse-common/lib/get-url","discourse-common/lib/icon-library","I18n","@ember/template"],(function(e,s,t,n,i,r,o,a,l,u,c,d){"use strict";var g,p;function f(e,s,t,n,i){var r={};return Object.keys(n).forEach((function(e){r[e]=n[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=t.slice().reverse().reduce((function(t,n){return n(e,s,t)||t}),r),i&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(i):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,s,r),r=null),r}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var m=s.default.extend((g=(0,t.default)("model.topics.length","search"),p={user:(0,r.inject)(),taskActions:(0,o.inject)(),queryParams:["order","ascending","search"],order:"",ascending:!1,search:"",_setSearchTerm:function(e){this.set("search",e),this.refreshModel()},doesntHaveAssignments:function(e,s){return!s&&!e},emptyStateBody:function(){return(0,d.htmlSafe)(c.default.t("user.no_assignments_body",{preferencesUrl:(0,l.default)("/my/preferences/notifications"),icon:(0,u.iconHTML)("user-plus")}))},refreshModel:function(){var e=this;this.set("loading",!0),this.store.findFiltered("topicList",{filter:this.model.filter,params:{order:this.order,ascending:this.ascending,search:this.search}}).then((function(s){return e.set("model",s)})).finally((function(){e.set("loading",!1)}))},unassign:function(e){var s=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Topic";this.taskActions.unassign(e,t).then((function(){return s.send("changeAssigned")}))},reassign:function(e){var s=this;this.taskActions.assign(e).set("model.onSuccess",(function(){return s.send("changeAssigned")}))},changeSort:function(e){e===this.order?(this.toggleProperty("ascending"),this.refreshModel()):(this.setProperties({order:e,ascending:!1}),this.refreshModel())},onChangeFilter:function(e){(0,n.default)(this,this._setSearchTerm,e,2*i.INPUT_DELAY)}},f(p,"doesntHaveAssignments",[g],Object.getOwnPropertyDescriptor(p,"doesntHaveAssignments"),p),f(p,"emptyStateBody",[t.default],Object.getOwnPropertyDescriptor(p,"emptyStateBody"),p),f(p,"unassign",[a.action],Object.getOwnPropertyDescriptor(p,"unassign"),p),f(p,"reassign",[a.action],Object.getOwnPropertyDescriptor(p,"reassign"),p),f(p,"changeSort",[a.action],Object.getOwnPropertyDescriptor(p,"changeSort"),p),f(p,"onChangeFilter",[a.action],Object.getOwnPropertyDescriptor(p,"onChangeFilter"),p),p));e.default=m})),define("discourse/plugins/discourse-assign/discourse-assign/initializers/extend-for-assigns",["exports","discourse/helpers/user-avatar","discourse/lib/plugin-api","discourse-common/utils/decorators","discourse-common/lib/icon-library","discourse/lib/utilities","virtual-dom","discourse/widgets/widget","discourse-common/lib/get-owner","@ember/template","discourse-common/lib/get-url","discourse/components/search-advanced-options","discourse/controllers/topic-bulk-actions","@ember/controller","I18n","@ember/utils","discourse/lib/register-topic-footer-dropdown"],(function(e,s,t,n,i,r,o,a,l,u,c,d,g,p,f,m,h){"use strict";function b(e,s){return function(e){if(Array.isArray(e))return e}(e)||function(e,s){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var n,i,r=[],o=!0,a=!1;try{for(t=t.call(e);!(o=(n=t.next()).done)&&(r.push(n.value),!s||r.length!==s);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==t.return||t.return()}finally{if(a)throw i}}return r}(e,s)||function(e,s){if(!e)return;if("string"==typeof e)return v(e,s);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return v(e,s)}(e,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,s){(null==s||s>e.length)&&(s=e.length);for(var t=0,n=new Array(s);t<s;t++)n[t]=e[t];return n}function _(e,s,t,n,i){var r={};return Object.keys(n).forEach((function(e){r[e]=n[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=t.slice().reverse().reduce((function(t,n){return n(e,s,t)||t}),r),i&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(i):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,s,r),r=null),r}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var y="discourse-assign",P=["topic.assigned_to_user","topic.assigned_to_group","currentUser.can_assign","topic.assigned_to_user.username"];function w(e){return(s=e.get("topic.assigned_to_user.username")||e.get("topic.assigned_to_group.name"))?f.default.t("discourse_assign.unassign.help",{username:s}):f.default.t("discourse_assign.assign.help");var s}var S=/^(assigned:)/gi,j={name:"extend-for-assign",initialize:function(e){if(e.lookup("site-settings:main").assign_enabled){var v=e.lookup("current-user:main");null!=v&&v.can_assign&&(d.default.reopen({updateSearchTermForAssignedUsername:function(){var e=this.filterBlocks(S),s=this.get("searchedTerms.assigned"),t=this.searchTerm||"",n="assigned";0!==(null==s?void 0:s.length)?(0!==e.length?t=t.replace(e[0],"".concat(n,":").concat(s)):t+=" ".concat(n,":").concat(s),this._updateSearchTerm(t)):0!==e.length&&(t=t.replace(e[0],""),this._updateSearchTerm(t))}}),g.default.reopen({assignUser:(0,p.inject)("assign-user"),actions:{showReAssign:function(){this.set("assignUser.isBulkAction",!0),this.set("assignUser.model",{username:"",description:"discourse_assign.assign_bulk_modal.description"}),this.send("changeBulkTemplate","modal/assign-user")},unassignTopics:function(){this.performAndRefresh({type:"unassign"})}}}),(0,g.addBulkButton)("showReAssign","assign",{icon:"user-plus",class:"btn-default"}),(0,g.addBulkButton)("unassignTopics","unassign",{icon:"user-times",class:"btn-default"})),(0,t.withPluginApi)("0.13.0",(function(e){return function(e){e.modifyClass("model:topic",{pluginId:y,isAssigned:function(){return this.assigned_to_user||this.assigned_to_group}})}(e)})),(0,t.withPluginApi)("0.11.0",(function(e){return function(e){var s,t,u,d,g,p=e.container.lookup("site-settings:main"),h=e.getCurrentUser();function v(e){return(0,c.default)(p.assigns_user_url_path.replace("{username}",e.username))}function P(e){return(0,c.default)("/g/".concat(e.name,"/assigned/everyone"))}(p.assigns_public||null!=h&&h.can_assign)&&(e.addNavigationBarItem({name:"unassigned",customFilter:function(e){var s;return"true"===(null==e||null===(s=e.custom_fields)||void 0===s?void 0:s.enable_unassigned_filter)},customHref:function(e){if(e)return(0,c.default)(e.url)+"/l/latest?status=open&assigned=nobody"},forceActive:function(e,s){var t=s.currentRouteQueryParams;return t&&2===Object.keys(t).length&&"nobody"===t.assigned&&"open"===t.status},before:"top"}),e.getCurrentUser()&&e.getCurrentUser().can_assign&&(e.addPostMenuButton("assign",(function(s){var t;if(!s.firstPost)return s.assigned_to_user||s.assigned_to_group?{action:"unassignPost",icon:"user-times",className:"unassign-post",title:"discourse_assign.unassign_post.title",position:(null===(t=s.assigned_to_user)||void 0===t?void 0:t.id)===e.getCurrentUser().id?"first":"second-last-hidden"}:{action:"assignPost",icon:"user-plus",className:"assign-post",title:"discourse_assign.assign_post.title",position:"second-last-hidden"}})),e.attachWidgetAction("post","assignPost",(function(){(0,l.getOwner)(this).lookup("service:task-actions").assign(this.model,{isAssigned:!1,targetType:"Post"})})),e.attachWidgetAction("post","unassignPost",(function(){var e=this;(0,l.getOwner)(this).lookup("service:task-actions").unassign(this.model.id,"Post").then((function(){delete e.model.topic.indirectly_assigned_to[e.model.id]}))})))),e.addAdvancedSearchOptions(e.getCurrentUser()&&e.getCurrentUser().can_assign?{inOptionsForUsers:[{name:f.default.t("search.advanced.in.assigned"),value:"assigned"},{name:f.default.t("search.advanced.in.unassigned"),value:"unassigned"}]}:{}),e.modifyClass("model:bookmark",(s=(0,n.default)("assigned_to_user"),t=(0,n.default)("assigned_to_group"),_(u={pluginId:y,assignedToUserPath:function(e){return v(e)},assignedToGroupPath:function(e){return P(e)}},"assignedToUserPath",[s],Object.getOwnPropertyDescriptor(u,"assignedToUserPath"),u),_(u,"assignedToGroupPath",[t],Object.getOwnPropertyDescriptor(u,"assignedToGroupPath"),u),u)),e.modifyClass("component:topic-notifications-button",(d=(0,n.default)("topic","topic.details.{notification_level,notifications_reason_id}"),g={pluginId:y,notificationReasonText:function(e){return this.currentUser.never_auto_track_topics&&e.assigned_to_user&&e.assigned_to_user.username===this.currentUser.username?f.default.t("notification_reason.user"):this._super.apply(this,arguments)}},_(g,"notificationReasonText",[d],Object.getOwnPropertyDescriptor(g,"notificationReasonText"),g),g)),e.addPostSmallActionIcon("assigned","user-plus"),e.addPostSmallActionIcon("assigned_to_post","user-plus"),e.addPostSmallActionIcon("assigned_group","group-plus"),e.addPostSmallActionIcon("assigned_group_to_post","group-plus"),e.addPostSmallActionIcon("unassigned","user-times"),e.addPostSmallActionIcon("unassigned_group","group-times"),e.addPostSmallActionIcon("unassigned_from_post","user-times"),e.addPostSmallActionIcon("unassigned_group_from_post","group-times"),e.includePostAttributes("assigned_to_user","assigned_to_group"),e.addPostSmallActionIcon("reassigned","user-plus"),e.addPostSmallActionIcon("reassigned_group","group-plus"),e.addPostTransformCallback((function(e){["assigned","unassigned","reassigned","assigned_group","unassigned_group","reassigned_group","assigned_to_post","assigned_group_to_post","unassigned_from_post","unassigned_group_from_post","note_change"].includes(e.actionCode)&&(e.isSmallAction=!0,e.canEdit=!0)})),e.addDiscoveryQueryParam("assigned",{replace:!0,refreshModel:!0}),e.addTagsHtmlCallback((function(e){var s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=b(Object.values(e.getProperties("assigned_to_user","assigned_to_group","assignment_note")),3),o=n[0],a=n[1],l={assignee:o||a,note:n[2]};s=e.get("indirectly_assigned_to")?Object.entries(e.get("indirectly_assigned_to")).map((function(e){var s=b(e,2),t=s[0],n=s[1];return n.assigned_to.assignedToPostId=t,n})):[];var u=[].concat(l,s.map((function(e){return{assignee:e.assigned_to,note:e.assignment_note}}))).filter((function(e){return e.assignee})).flat();if(u)return u.map((function(s){var n,o=s.assignee,a=s.note;n=o.assignedToPostId?"/p/".concat(o.assignedToPostId):"/t/".concat(e.id);var l=(0,i.iconHTML)(o.assign_icon),u=o.username||o.name,c=t.tagName||"a",d="a"===c?'href="'.concat(n,'" data-auto-route="true"'):"";return"<".concat(c,' class="assigned-to discourse-tag simple" ').concat(d,">\n        ").concat(l,'\n        <span title="').concat((0,r.escapeExpression)(a),'">').concat(u,"</span>\n      </").concat(c,">")})).join("")})),e.addUserMenuGlyph((function(e){if(e.currentUser&&e.currentUser.can_assign){var s={label:"discourse_assign.assigned",className:"assigned",icon:"user-plus",href:"".concat(e.currentUser.path,"/activity/assigned")};return(0,a.queryRegistry)("quick-access-panel")&&(s.action="quickAccess",s.actionParam="assignments"),s}})),e.createWidget("assigned-to",{html:function(e){var s=e.assignedToUser,t=e.assignedToGroup,n=e.href;return(0,o.h)("p.assigned-to",[s?(0,i.iconNode)("user-plus"):(0,i.iconNode)("group-plus"),(0,o.h)("span.assign-text",f.default.t("discourse_assign.assigned_to")),(0,o.h)("a",{attributes:{class:"assigned-to-username",href:n}},s?s.username:t.name)])}}),e.createWidget("assigned-to-first-post",{html:function(e){var s=e.topic,t=[s.assigned_to_user,s.assigned_to_group,s.indirectly_assigned_to],n=t[0],r=t[1],a=t[2],l=[];if(n&&l.push((0,o.h)("span.assignee",[(0,o.h)("a",{attributes:{class:"assigned-to-username",href:v(n)}},n.username)])),r&&l.push((0,o.h)("span.assignee",[(0,o.h)("a",{attributes:{class:"assigned-to-group",href:P(r)}},r.name)])),a&&Object.keys(a).map((function(e){var t=a[e].assigned_to,n=a[e].post_number;l.push((0,o.h)("span.assignee",[(0,o.h)("a",{attributes:{class:"assigned-indirectly",href:"".concat(s.url,"/").concat(n)}},"#".concat(n," ").concat(t.username||t.name))]))})),!(0,m.isEmpty)(l))return(0,o.h)("p.assigned-to",[n?(0,i.iconNode)("user-plus"):(0,i.iconNode)("group-plus"),(0,o.h)("span.assign-text",f.default.t("discourse_assign.assigned_to")),l])}}),e.modifyClass("model:group",{pluginId:y,asJSON:function(){return Object.assign({},this._super.apply(this,arguments),{assignable_level:this.assignable_level})}}),e.modifyClass("controller:topic",{pluginId:y,subscribe:function(){var e=this;this._super.apply(this,arguments),this.messageBus.subscribe("/staff/topic-assignment",(function(s){var t=e.model,n=t.id;if(s.topic_id===n){var i;s.post_id&&(i=t.postStream.posts.find((function(e){return e.id===s.post_id})));var r=i||t;r.set("assignment_note",s.assignment_note),"User"===s.assigned_type&&(r.set("assigned_to_user_id","assigned"===s.type?s.assigned_to.id:null),r.set("assigned_to_user",s.assigned_to)),"Group"===s.assigned_type&&(r.set("assigned_to_group_id","assigned"===s.type?s.assigned_to.id:null),r.set("assigned_to_group",s.assigned_to)),s.post_id&&("unassigned"===s.type&&delete t.indirectly_assigned_to[s.post_number],e.appEvents.trigger("post-stream:refresh",{id:t.postStream.posts[0].id}),e.appEvents.trigger("post-stream:refresh",{id:s.post_id}))}e.appEvents.trigger("header:update-topic",t)}))},unsubscribe:function(){this._super.apply(this,arguments),this.get("model.id")&&this.messageBus.unsubscribe("/staff/topic-assignment")}}),e.decorateWidget("post-contents:after-cooked",(function(e){var s=e.getModel();if(s){var t,n,i,r,o,a,l,u;if(1===e.attrs.post_number)return e.widget.attach("assigned-to-first-post",{topic:s.topic});if(null!==(l=i=null===(o=s.topic.indirectly_assigned_to)||void 0===o||null===(a=o[s.id])||void 0===a?void 0:a.assigned_to)&&void 0!==l&&l.username&&(t=i),null!==(u=i)&&void 0!==u&&u.name&&(n=i),(t||n)&&(r=t?v(t):P(n)),r)return e.widget.attach("assigned-to",{assignedToUser:t,assignedToGroup:n,href:r})}})),e.replaceIcon("notification.assigned","user-plus"),e.replaceIcon("notification.discourse_assign.assign_group_notification","group-plus"),e.modifyClass("controller:preferences/notifications",{pluginId:y,actions:{save:function(){this.saveAttrNames.push("custom_fields"),this._super.apply(this,arguments)}}}),e.addKeyboardShortcut("g a","",{path:"/my/activity/assigned"})}(e)})),(0,t.withPluginApi)("0.8.28",(function(e){return function(e){(0,h.registerTopicFooterDropdown)({id:"reassign",action:function(e){var s=this;if(this.get("currentUser.can_assign")){var t=(0,l.getOwner)(this).lookup("service:task-actions");switch(e){case"unassign":this.set("topic.assigned_to_user",null),this.set("topic.assigned_to_group",null),t.unassign(this.topic.id).then((function(){s.appEvents.trigger("post-stream:refresh",{id:s.topic.postStream.firstPostId})}));break;case"reassign-self":this.set("topic.assigned_to_user",null),this.set("topic.assigned_to_group",null),t.reassignUserToTopic(this.currentUser,this.topic).then((function(){s.appEvents.trigger("post-stream:refresh",{id:s.topic.postStream.firstPostId})}));break;case"reassign":t.assign(this.topic,{targetType:"Topic",isAssigned:this.topic.isAssigned()}).set("model.onSuccess",(function(){s.appEvents.trigger("post-stream:refresh",{id:s.topic.postStream.firstPostId})}))}}},noneItem:function(){var e=this.get("topic.assigned_to_user"),t=this.get("topic.assigned_to_group"),n=f.default.t("discourse_assign.unassign.title_w_ellipsis"),i=f.default.t("discourse_assign.unassign.title");return e?{id:null,name:f.default.t("discourse_assign.reassign_modal.title"),label:(0,u.htmlSafe)("".concat((0,s.renderAvatar)(e,{imageSize:"tiny",ignoreTitle:!0}),'<span class="unassign-label">').concat(n,"</span>"))}:t?{id:null,name:f.default.t("discourse_assign.reassign_modal.title"),label:(0,u.htmlSafe)('<span class="unassign-label">'.concat(i,"</span> @").concat(t.name,"..."))}:void 0},dependentKeys:P,classNames:["reassign"],content:function(){var e,s,t,n=[{id:"unassign",name:f.default.t("discourse_assign.unassign.help",{username:(null===(e=this.topic.assigned_to_user)||void 0===e?void 0:e.username)||(null===(s=this.topic.assigned_to_group)||void 0===s?void 0:s.name)}),label:(0,u.htmlSafe)("".concat((0,i.iconHTML)("user-times")," ").concat(f.default.t("discourse_assign.unassign.title")))}];return this.topic.isAssigned()&&(null===(t=this.get("topic.assigned_to_user"))||void 0===t?void 0:t.username)!==this.currentUser.username&&n.push({id:"reassign-self",name:f.default.t("discourse_assign.reassign.to_self_help"),label:(0,u.htmlSafe)("".concat((0,i.iconHTML)("user-plus")," ").concat(f.default.t("discourse_assign.reassign.to_self")))}),n.push({id:"reassign",name:f.default.t("discourse_assign.reassign.help"),label:(0,u.htmlSafe)("".concat((0,i.iconHTML)("group-plus")," ").concat(f.default.t("discourse_assign.reassign.title_w_ellipsis")))}),n},displayed:function(){return this.get("currentUser.can_assign")&&!this.site.mobileView&&this.topic.isAssigned()}}),e.registerTopicFooterButton({id:"assign",icon:function(){return this.topic.isAssigned()?this.site.mobileView?"user-times":null:"user-plus"},priority:250,translatedTitle:function(){return w(this)},translatedAriaLabel:function(){return w(this)},translatedLabel:function(){return f.default.t("discourse_assign.assign.title")},action:function(){var e=this;if(this.get("currentUser.can_assign")){var s=(0,l.getOwner)(this).lookup("service:task-actions");this.topic.isAssigned()?(this.set("topic.assigned_to_user",null),this.set("topic.assigned_to_group",null),s.unassign(this.topic.id,"Topic").then((function(){e.appEvents.trigger("post-stream:refresh",{id:e.topic.postStream.firstPostId})}))):s.assign(this.topic).set("model.onSuccess",(function(){e.appEvents.trigger("post-stream:refresh",{id:e.topic.postStream.firstPostId})}))}},dropdown:function(){return this.site.mobileView},classNames:["assign"],dependentKeys:P,displayed:function(){var e;return(null===(e=this.currentUser)||void 0===e?void 0:e.can_assign)&&!this.topic.isAssigned()}}),e.registerTopicFooterButton({id:"unassign-mobile-header",translatedTitle:function(){return w(this)},translatedAriaLabel:function(){return w(this)},translatedLabel:function(){var e=this.get("topic.assigned_to_user"),t=this.get("topic.assigned_to_group"),n=f.default.t("discourse_assign.assigned_to_w_ellipsis");return e?(0,u.htmlSafe)('<span class="unassign-label"><span class="text">'.concat(n,'</span><span class="username">').concat(e.username,"</span></span>").concat((0,s.renderAvatar)(e,{imageSize:"small",ignoreTitle:!0}))):t?(0,u.htmlSafe)('<span class="unassign-label">'.concat(n,"</span> @").concat(t.name)):void 0},dropdown:function(){var e;return(null===(e=this.currentUser)||void 0===e?void 0:e.can_assign)&&this.topic.isAssigned()},classNames:["assign"],dependentKeys:P,displayed:function(){var e;return(null===(e=this.currentUser)||void 0===e?void 0:e.can_assign)&&this.site.mobileView}}),e.registerTopicFooterButton({id:"unassign-mobile",icon:function(){return"user-times"},translatedTitle:function(){return w(this)},translatedAriaLabel:function(){return w(this)},translatedLabel:function(){var e=f.default.t("discourse_assign.unassign.title");return(0,u.htmlSafe)('<span class="unassign-label"><span class="text">'.concat(e,"</span></span>"))},action:function(){var e=this;if(this.get("currentUser.can_assign")){var s=(0,l.getOwner)(this).lookup("service:task-actions");this.set("topic.assigned_to_user",null),this.set("topic.assigned_to_group",null),s.unassign(this.topic.id).then((function(){e.appEvents.trigger("post-stream:refresh",{id:e.topic.postStream.firstPostId})}))}},dropdown:function(){var e;return(null===(e=this.currentUser)||void 0===e?void 0:e.can_assign)&&this.topic.isAssigned()},classNames:["assign"],dependentKeys:P,displayed:function(){var e;return(null===(e=this.currentUser)||void 0===e?void 0:e.can_assign)&&this.site.mobileView&&this.topic.isAssigned()}}),e.registerTopicFooterButton({id:"reassign-self-mobile",icon:function(){return"user-plus"},translatedTitle:function(){return f.default.t("discourse_assign.reassign.to_self_help")},translatedAriaLabel:function(){return f.default.t("discourse_assign.reassign.to_self_help")},translatedLabel:function(){var e=f.default.t("discourse_assign.reassign.to_self");return(0,u.htmlSafe)('<span class="unassign-label"><span class="text">'.concat(e,"</span></span>"))},action:function(){var e=this;if(this.get("currentUser.can_assign")){var s=(0,l.getOwner)(this).lookup("service:task-actions");this.set("topic.assigned_to_user",null),this.set("topic.assigned_to_group",null),s.reassignUserToTopic(this.currentUser,this.topic).then((function(){e.appEvents.trigger("post-stream:refresh",{id:e.topic.postStream.firstPostId})}))}},dropdown:function(){var e;return(null===(e=this.currentUser)||void 0===e?void 0:e.can_assign)&&this.topic.isAssigned()},classNames:["assign"],dependentKeys:P,displayed:function(){var e,s;return this.site.mobileView&&(null===(e=this.currentUser)||void 0===e?void 0:e.can_assign)&&this.topic.isAssigned()&&(null===(s=this.get("topic.assigned_to_user"))||void 0===s?void 0:s.username)!==this.currentUser.username}}),e.registerTopicFooterButton({id:"reassign-mobile",icon:function(){return"group-plus"},translatedTitle:function(){return f.default.t("discourse_assign.reassign.help")},translatedAriaLabel:function(){return f.default.t("discourse_assign.reassign.help")},translatedLabel:function(){var e=f.default.t("discourse_assign.reassign.title_w_ellipsis");return(0,u.htmlSafe)('<span class="unassign-label"><span class="text">'.concat(e,"</span></span>"))},action:function(){var e=this;this.get("currentUser.can_assign")&&(0,l.getOwner)(this).lookup("service:task-actions").assign(this.topic,{targetType:"Topic",isAssigned:this.topic.isAssigned()}).set("model.onSuccess",(function(){e.appEvents.trigger("post-stream:refresh",{id:e.topic.postStream.firstPostId})}))},dropdown:function(){var e;return(null===(e=this.currentUser)||void 0===e?void 0:e.can_assign)&&this.topic.isAssigned()},classNames:["assign"],dependentKeys:P,displayed:function(){var e;return(null===(e=this.currentUser)||void 0===e?void 0:e.can_assign)&&this.site.mobileView}})}(e)})),(0,t.withPluginApi)("0.11.7",(function(e){e.addSearchSuggestion("in:assigned"),e.addSearchSuggestion("in:unassigned")})),(0,t.withPluginApi)("0.12.2",(function(e){e.addGroupPostSmallActionCode("assigned_group"),e.addGroupPostSmallActionCode("unassigned_group"),e.addGroupPostSmallActionCode("assigned_group_to_post"),e.addGroupPostSmallActionCode("unassigned_group_from_post")})),(0,t.withPluginApi)("0.12.3",(function(e){e.addUserSearchOption("assignableGroups")}))}}};e.default=j})),define("discourse/plugins/discourse-assign/discourse-assign/pre-initializers/extend-category-for-assign",["exports","discourse/models/category","@ember/object"],(function(e,s,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"extend-category-for-assign",before:"inject-discourse-objects",initialize:function(){s.default.reopen({enable_unassigned_filter:(0,t.computed)("custom_fields.enable_unassigned_filter",{get:function(){var e;return"true"===(null==this||null===(e=this.custom_fields)||void 0===e?void 0:e.enable_unassigned_filter)}})})}};e.default=n})),define("discourse/plugins/discourse-assign/discourse-assign/routes/group-assigned-show",["exports","discourse/routes/discourse","discourse/lib/cached-topic-list"],(function(e,s,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s.default.extend({beforeModel:function(e){e.hasOwnProperty("from")&&e.from&&"show"===e.from.localName&&this.session.set("topicListScrollPosition",1)},model:function(e){var s=null;s=["everyone",this.modelFor("group").get("name")].includes(e.filter)?"topics/group-topics-assigned/".concat(this.modelFor("group").get("name")):"topics/messages-assigned/".concat(e.filter);var n=(0,t.findOrResetCachedTopicList)(this.session,s);return n||this.store.findFiltered("topicList",{filter:s,params:{order:e.order,ascending:e.ascending,search:e.search,direct:"everyone"!==e.filter}})},setupController:function(e,s){e.setProperties({model:s,search:this.currentModel.params.search})},renderTemplate:function(){this.render("group-topics-list")}});e.default=n})),define("discourse/plugins/discourse-assign/discourse-assign/routes/group-assigned",["exports","discourse/routes/discourse","discourse/lib/ajax","@ember/object"],(function(e,s,t,n){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,o,a,l,u,c,d=s.default.extend((r=i={model:function(){return(0,t.ajax)("/assign/members/".concat(this.modelFor("group").get("name")))},setupController:function(e,s){e.setProperties({model:s,members:[],group:this.modelFor("group")}),e.group.setProperties({assignment_count:s.assignment_count,group_assignment_count:s.group_assignment_count}),e.findMembers(!0)},redirect:function(e,s){s.to.params.hasOwnProperty("filter")?this.transitionTo("group.assigned.show",s.to.params.filter):this.transitionTo("group.assigned.show","everyone")},changeAssigned:function(){this.refresh()}},o="changeAssigned",a=[n.action],l=Object.getOwnPropertyDescriptor(i,"changeAssigned"),u=i,c={},Object.keys(l).forEach((function(e){c[e]=l[e]})),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,("value"in c||c.initializer)&&(c.writable=!0),c=a.slice().reverse().reduce((function(e,s){return s(r,o,e)||e}),c),u&&void 0!==c.initializer&&(c.value=c.initializer?c.initializer.call(u):void 0,c.initializer=void 0),void 0===c.initializer&&(Object.defineProperty(r,o,c),c=null),i));e.default=d})),define("discourse/plugins/discourse-assign/discourse-assign/routes/user-activity-assigned",["exports","I18n","discourse/routes/user-topic-list","discourse/lib/cookie","@ember/object"],(function(e,s,t,n,i){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,a,l,u,c,d,g=t.default.extend((o=r={userActionType:16,noContentHelpKey:"discourse_assigns.no_assigns",beforeModel:function(){void 0===this.currentUser&&((0,n.default)("destination_url",window.location.href),this.transitionTo("login"))},model:function(e){return this.store.findFiltered("topicList",{filter:"topics/messages-assigned/".concat(this.modelFor("user").get("username_lower")),params:{exclude_category_ids:[-1],order:e.order,ascending:e.ascending,search:e.search}})},titleToken:function(){return s.default.t("discourse_assign.assigned")},renderTemplate:function(){this.render("user-activity-assigned"),this.render("user-assigned-topics",{into:"user-activity-assigned"})},setupController:function(e,s){this._super(e,s),e.set("model",s)},changeAssigned:function(){this.refresh()}},a="changeAssigned",l=[i.action],u=Object.getOwnPropertyDescriptor(r,"changeAssigned"),c=r,d={},Object.keys(u).forEach((function(e){d[e]=u[e]})),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce((function(e,s){return s(o,a,e)||e}),d),c&&void 0!==d.initializer&&(d.value=d.initializer?d.initializer.call(c):void 0,d.initializer=void 0),void 0===d.initializer&&(Object.defineProperty(o,a,d),d=null),r));e.default=g})),define("discourse/plugins/discourse-assign/discourse-assign/routes/user-private-messages-assigned",["exports","discourse/routes/build-private-messages-route"],(function(e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=(0,s.default)("assigned","private-messages-assigned","assigned");e.default=t})),define("discourse/plugins/discourse-assign/discourse/components/assign-actions-dropdown",["exports","I18n","select-kit/components/dropdown-select-box","@ember/object"],(function(e,s,t,n){"use strict";var i;function r(e,s){return function(e){if(Array.isArray(e))return e}(e)||function(e,s){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var n,i,r=[],o=!0,a=!1;try{for(t=t.call(e);!(o=(n=t.next()).done)&&(r.push(n.value),!s||r.length!==s);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==t.return||t.return()}finally{if(a)throw i}}return r}(e,s)||function(e,s){if(!e)return;if("string"==typeof e)return o(e,s);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return o(e,s)}(e,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,s){(null==s||s>e.length)&&(s=e.length);for(var t=0,n=new Array(s);t<s;t++)n[t]=e[t];return n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a,l,u,c,d,g,p=t.default.extend((a=i={classNames:["assign-actions-dropdown"],headerIcon:null,title:"...",allowInitialValueMutation:!1,showFullTitle:!0,computeContent:function(){var e=[];return this.assignee&&(e=e.concat([{id:"unassign",icon:this.group?"group-times":"user-times",name:s.default.t("discourse_assign.unassign.title"),description:s.default.t("discourse_assign.unassign.help",{username:this.assignee})},{id:"reassign",icon:"users",name:s.default.t("discourse_assign.reassign.title"),description:s.default.t("discourse_assign.reassign.help")}])),this.topic.indirectly_assigned_to&&Object.entries(this.topic.indirectly_assigned_to).forEach((function(t){var n=r(t,2),i=n[0],o=n[1].assigned_to;e=e.concat({id:"unassign_post_".concat(i),icon:o.username?"user-times":"group-times",name:s.default.t("discourse_assign.unassign_post.title"),description:s.default.t("discourse_assign.unassign_post.help",{username:o.username||o.name})})})),e},onSelect:function(e){var s;switch(e){case"unassign":this.unassign(this.topic.id);break;case"reassign":this.reassign(this.topic,this.assignee)}var t=null===(s=e.match(/unassign_post_(\d+)/))||void 0===s?void 0:s[1];t&&this.unassign(t,"Post")}},l="onSelect",u=[n.action],c=Object.getOwnPropertyDescriptor(i,"onSelect"),d=i,g={},Object.keys(c).forEach((function(e){g[e]=c[e]})),g.enumerable=!!g.enumerable,g.configurable=!!g.configurable,("value"in g||g.initializer)&&(g.writable=!0),g=u.slice().reverse().reduce((function(e,s){return s(a,l,e)||e}),g),d&&void 0!==g.initializer&&(g.value=g.initializer?g.initializer.call(d):void 0,g.initializer=void 0),void 0===g.initializer&&(Object.defineProperty(a,l,g),g=null),i));e.default=p})),define("discourse/plugins/discourse-assign/discourse/components/assigned-to",["exports","@ember/component"],(function(e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=s.default.extend({classNames:["assigned-to-user"]});e.default=t})),define("discourse/plugins/discourse-assign/discourse/components/assigned-topic-list-item",["exports","discourse/components/topic-list-item","@ember/object/computed"],(function(e,s,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s.default.extend({classNames:["assigned-topic-list-item"],isPrivateMessage:(0,t.equal)("topic.archetype","private_message")});e.default=n})),define("discourse/plugins/discourse-assign/discourse/components/assigned-topic-list",["exports","discourse/components/topic-list"],(function(e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=s.default;e.default=t})),define("discourse/plugins/discourse-assign/discourse/components/basic-assigned-topic-list",["exports","discourse/components/basic-topic-list"],(function(e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=s.default;e.default=t})),define("discourse/plugins/discourse-assign/discourse/components/flagged-topic-listener",["exports","@ember/component","@ember/object"],(function(e,s,t){"use strict";function n(e,s){e&&e.id===s.topic_id&&(0,t.set)(e,"assigned_to_user",s.assigned_to)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=s.default.extend({didInsertElement:function(){var e=this;this._super(),this.messageBus.subscribe("/staff/topic-assignment",(function(s){var t=e.flaggedTopics;t?t.forEach((function(e){return n(e.topic,s)})):n(e.topic,s)}))},willDestroyElement:function(){this._super(),this.messageBus.unsubscribe("/staff/topic-assignment")}});e.default=i})),define("discourse/plugins/discourse-assign/discourse/components/group-assigned-filter",["exports","@ember/component"],(function(e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=s.default.extend({tagName:"li"});e.default=t})),define("discourse/plugins/discourse-assign/discourse/components/group-assigned-menu-item",["exports","@ember/component"],(function(e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=s.default.extend({tagName:""});e.default=t})),define("discourse/plugins/discourse-assign/discourse/components/remind-assigns-frequency",["exports","@ember/component","I18n","discourse-common/utils/decorators"],(function(e,s,t,n){"use strict";var i,r,o;function a(e,s,t,n,i){var r={};return Object.keys(n).forEach((function(e){r[e]=n[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=t.slice().reverse().reduce((function(t,n){return n(e,s,t)||t}),r),i&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(i):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,s,r),r=null),r}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=s.default.extend((i=(0,n.default)("user.custom_fields.remind_assigns_frequency","siteSettings.remind_assigns_frequency"),r=(0,n.default)("user.reminders_frequency"),a(o={selectedFrequency:function(e,s){return this.availableFrequencies.map((function(e){return e.value})).includes(e)?e:s},availableFrequencies:function(e){return e.map((function(e){return{name:t.default.t(e.name),value:e.value,selected:!1}}))}},"selectedFrequency",[i],Object.getOwnPropertyDescriptor(o,"selectedFrequency"),o),a(o,"availableFrequencies",[r],Object.getOwnPropertyDescriptor(o,"availableFrequencies"),o),o));e.default=l})),define("discourse/plugins/discourse-assign/discourse/initializers/assign-sidebar",["exports","discourse/lib/plugin-api","I18n"],(function(e,s,t){"use strict";function n(e,s){if(!_instanceof(e,s))throw new TypeError("Cannot call a class as a function")}function i(e,s){for(var t=0;t<s.length;t++){var n=s[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,s){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,s){return e.__proto__=s,e},r(e,s)}function o(e){var s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=l(e);if(s){var i=l(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return a(this,t)}}function a(e,s){if(s&&("object"===_typeof(s)||"function"==typeof s))return s;if(void 0!==s)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u={name:"assign-sidebar",initialize:function(e){(0,s.withPluginApi)("1.2.0",(function(s){var a=e.lookup("current-user:main");null!=a&&a.experimental_sidebar_enabled&&null!=a&&a.can_assign&&s.addTopicsSectionLink((function(e){return function(e){!function(e,s){if("function"!=typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),s&&r(e,s)}(c,e);var s,a,l,u=o(c);function c(){return n(this,c),u.apply(this,arguments)}return s=c,(a=[{key:"name",get:function(){return"assigned"}},{key:"route",get:function(){return"userActivity.assigned"}},{key:"model",get:function(){return this.currentUser}},{key:"title",get:function(){return t.default.t("sidebar.assigned_link_title")}},{key:"text",get:function(){return t.default.t("sidebar.assigned_link_text")}}])&&i(s.prototype,a),l&&i(s,l),Object.defineProperty(s,"prototype",{writable:!1}),c}(e)}))}))}};e.default=u})),define("discourse/plugins/discourse-assign/discourse/services/task-actions",["exports","@ember/service","discourse/lib/ajax","discourse/lib/show-modal"],(function(e,s,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=s.default.extend({i18nSuffix:function(e){switch(e){case"Post":return"_post_modal";case"Topic":return"_modal"}},unassign:function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Topic";return(0,t.ajax)("/assign/unassign",{type:"PUT",data:{target_id:e,target_type:s}})},assign:function(e){var s,t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{isAssigned:!1,targetType:"Topic"};return(0,n.default)("assign-user",{title:"discourse_assign.assign"+this.i18nSuffix(i.targetType)+".".concat(i.isAssigned?"reassign_title":"title"),model:{description:"discourse_assign.".concat(i.isAssigned?"reassign":"assign")+this.i18nSuffix(i.targetType)+".description",reassign:i.isAssigned,username:null===(s=e.assigned_to_user)||void 0===s?void 0:s.username,group_name:null===(t=e.assigned_to_group)||void 0===t?void 0:t.name,target:e,targetType:i.targetType}})},reassignUserToTopic:function(e,s){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Topic";return(0,t.ajax)("/assign/assign",{type:"PUT",data:{username:e.username,target_id:s.id,target_type:n}})}});e.default=i})),Ember.TEMPLATES["javascripts/components/assigned-to"]=Ember.HTMLBars.template({id:null,block:'[[[1,[28,[35,0],[[33,1]],[["imageSize"],["small"]]]],[1,"\\n"],[10,1],[14,0,"assigned-username"],[12],[1,"\\n  "],[1,[33,1,["username"]]],[1,"\\n"],[13],[1,"\\n"],[18,1,null],[1,"\\n"]],["&default"],false,["avatar","user","yield"]]',moduleName:"javascripts/discourse/templates/components/assigned-to",isStrictMode:!1}),Ember.TEMPLATES["javascripts/components/assigned-topic-list-item"]=Ember.HTMLBars.template({id:null,block:'[[[41,[33,1],[[[1,"  "],[10,"td"],[14,0,"bulk-select topic-list-data"],[12],[1,"\\n    "],[10,"input"],[14,0,"bulk-select"],[14,4,"checkbox"],[12],[13],[1,"\\n  "],[13],[1,"\\n"]],[]],null],[10,"td"],[14,0,"main-link clearfix topic-list-data"],[14,"colspan","1"],[12],[1,"\\n  "],[10,1],[14,0,"link-top-line"],[12],[1,[28,[35,2],["topic-status"],[["topic"],[[33,3]]]]],[41,[33,4],[[[1,[28,[35,5],["envelope"],[["class"],["private-message-icon"]]]]],[]],null],[1,[28,[35,6],[[33,3]],[["class"],["raw-link raw-topic-link"]]]],[41,[33,3,["featured_link"]],[[[1,[28,[35,7],[[33,3]],null]]],[]],null],[41,[33,8],[[[1,[28,[35,2],["topic-post-badges"],[["unread","unseen","url","newDotText"],[[33,3,["unread"]],[33,3,["unseen"]],[33,3,["lastUnreadUrl"]],[33,9]]]]]],[]],null],[1,"  "],[13],[1,"\\n  "],[10,0],[14,0,"link-bottom-line"],[12],[1,"\\n"],[41,[51,[33,11]],[[[41,[51,[33,3,["isPinnedUncategorized"]]],[[[1,"        "],[1,[28,[35,12],[[33,3,["category"]]],null]],[1,"\\n"]],[]],null]],[]],null],[1,"    "],[1,[28,[35,13],[[33,3]],[["mode","tagsForUser"],["list",[33,14]]]]],[1,"\\n    "],[1,[28,[35,2],["list/action-list"],[["topic","postNumbers","className","icon"],[[33,3],[33,3,["liked_post_numbers"]],"likes","heart"]]]],[1,"\\n  "],[13],[1,"\\n"],[41,[33,15],[[[1,"    "],[1,[28,[35,2],["list/topic-excerpt"],[["topic"],[[33,3]]]]],[1,"\\n"]],[]],null],[13],[1,"\\n\\n"],[41,[33,16],[[[1,"  "],[1,[28,[35,2],["list/posters-column"],[["posters"],[[33,3,["featuredUsers"]]]]]],[1,"\\n"]],[]],null],[1,"\\n"],[1,[28,[35,2],["list/posts-count-column"],[["topic"],[[33,3]]]]],[1,"\\n\\n"],[10,"td"],[15,0,[29,["num views ",[33,3,["viewsHeat"]]," topic-list-data"]]],[12],[1,[28,[35,17],[[33,3,["views"]]],[["numberKey"],["views_long"]]]],[13],[1,"\\n"],[1,[28,[35,2],["list/activity-column"],[["topic","class","tagName"],[[33,3],"num topic-list-data","td"]]]],[1,"\\n"],[10,"td"],[14,0,"topic-list-data"],[12],[1,"\\n"],[41,[33,3,["assigned_to_user"]],[[[1,"    "],[1,[28,[35,18],null,[["topic","assignee","unassign","reassign"],[[33,3],[33,3,["assigned_to_user","username"]],[33,19],[33,20]]]]],[1,"\\n"]],[]],[[[41,[33,3,["assigned_to_group"]],[[[1,"    "],[1,[28,[35,18],null,[["topic","assignee","group","unassign","reassign"],[[33,3],[33,3,["assigned_to_group","name"]],true,[33,19],[33,20]]]]],[1,"\\n"]],[]],[[[1,"    "],[1,[28,[35,18],null,[["topic","unassign"],[[33,3],[33,19]]]]],[1,"\\n  "]],[]]]],[]]],[13],[1,"\\n"]],[],false,["if","bulkSelectEnabled","raw","topic","isPrivateMessage","d-icon","topic-link","topic-featured-link","showTopicPostBadges","newDotText","unless","hideCategory","category-link","discourse-tags","tagsForUser","expandPinned","showPosters","number","assign-actions-dropdown","unassign","reassign"]]',moduleName:"javascripts/discourse/templates/components/assigned-topic-list-item",isStrictMode:!1}),Ember.TEMPLATES["javascripts/components/assigned-topic-list"]=Ember.HTMLBars.template({id:null,block:'[[[41,[51,[33,1]],[[[1,"  "],[10,"thead"],[14,0,"topic-list-header assigned-topic-list-header"],[12],[1,"\\n    "],[1,[28,[35,2],["topic-list-header"],[["canBulkSelect","canDoBulkActions","toggleInTitle","hideCategory","showPosters","showLikes","showOpLikes","order","ascending","sortable","listTitle","bulkSelectEnabled"],[[33,3],[33,4],[33,5],[33,6],true,[33,7],[33,8],[33,9],[33,10],[33,11],[33,12],[33,13]]]]],[1,"\\n  "],[13],[1,"\\n"]],[]],null],[1,"\\n"],[10,"tbody"],[14,0,"topic-list-body assigned-topic-list-body"],[12],[1,"\\n"],[42,[28,[37,15],[[28,[37,15],[[33,16]],null]],null],null,[[[1,"    "],[1,[28,[35,17],null,[["topic","bulkSelectEnabled","showTopicPostBadges","hideCategory","showPosters","showLikes","showOpLikes","expandGloballyPinned","expandAllPinned","lastVisitedTopic","selected","tagsForUser","unassign","reassign"],[[30,1],[33,13],[33,18],[33,6],true,[33,7],[33,8],[33,19],[33,20],[33,21],[33,22],[33,23],[33,24],[33,25]]]]],[1,"\\n\\n    "],[1,[28,[35,2],["list/visited-line"],[["lastVisitedTopic","topic"],[[33,21],[30,1]]]]],[1,"\\n"]],[1]],null],[13],[1,"\\n"]],["topic"],false,["unless","skipHeader","raw","canBulkSelect","canDoBulkActions","toggleInTitle","hideCategory","showLikes","showOpLikes","order","ascending","sortable","listTitle","bulkSelectEnabled","each","-track-array","filteredTopics","assigned-topic-list-item","showTopicPostBadges","expandGloballyPinned","expandAllPinned","lastVisitedTopic","selected","tagsForUser","unassign","reassign"]]',moduleName:"javascripts/discourse/templates/components/assigned-topic-list",isStrictMode:!1}),Ember.TEMPLATES["javascripts/components/basic-assigned-topic-list"]=Ember.HTMLBars.template({id:null,block:'[[[6,[39,0],null,[["condition"],[[33,1]]],[["default"],[[[[41,[33,3],[[[1,"    "],[10,0],[14,0,"show-mores"],[12],[1,"\\n      "],[11,3],[24,6,""],[24,0,"alert alert-info clickable"],[4,[38,4],[[30,0],[33,5]],null],[12],[1,"\\n        "],[1,[28,[35,6],null,[["key","suffix","count"],["topic_count_","latest",[33,7]]]]],[1,"\\n      "],[13],[1,"\\n    "],[13],[1,"\\n"]],[]],null],[1,"\\n"],[41,[33,8],[[[1,"    "],[1,[28,[35,9],null,[["showPosters","hideCategory","topics","expandExcerpts","bulkSelectEnabled","canBulkSelect","bulkSelectAction","selected","skipHeader","tagsForUser","changeSort","toggleBulkSelect","unassign","reassign","onScroll","scrollOnLoad"],[[33,10],[33,11],[33,8],[33,12],[33,13],[33,14],[33,15],[33,16],[33,17],[33,18],[33,19],[33,20],[33,21],[33,22],[33,23],[33,24]]]]],[1,"\\n"]],[]],[[[41,[51,[33,26]],[[[1,"      "],[10,0],[14,0,"alert alert-info"],[12],[1,"\\n        "],[1,[28,[35,27],["choose_topic.none_found"],null]],[1,"\\n      "],[13],[1,"\\n"]],[]],null]],[]]]],[]]]]]],[],false,["conditional-loading-spinner","loading","if","hasIncoming","action","showInserted","count-i18n","incomingCount","topics","assigned-topic-list","showPosters","hideCategory","expandExcerpts","bulkSelectEnabled","canBulkSelect","bulkSelectAction","selected","skipHeader","tagsForUser","changeSort","toggleBulkSelect","unassign","reassign","onScroll","scrollOnLoad","unless","loadingMore","i18n"]]',moduleName:"javascripts/discourse/templates/components/basic-assigned-topic-list",isStrictMode:!1}),Ember.TEMPLATES["javascripts/components/group-assigned-filter"]=Ember.HTMLBars.template({id:null,block:'[[[41,[33,1],[[[6,[39,2],null,[["query","route","model"],[[28,[37,3],null,[["order","ascending","search"],[[33,4],[33,5],[33,6]]]],"group.assigned.show",[33,7,["username_lower"]]]],[["default"],[[[[1,"    "],[10,0],[14,0,"assign-image"],[12],[1,"\\n      "],[10,3],[15,6,[33,7,["userPath"]]],[15,"data-user-card",[33,7,["username"]]],[12],[1,[28,[35,8],[[33,7]],[["imageSize"],["large"]]]],[13],[1,"\\n    "],[13],[1,"\\n\\n    "],[10,0],[14,0,"assign-names"],[12],[1,"\\n      "],[10,0],[14,0,"assign-username"],[12],[1,[28,[35,9],[[33,7,["username"]]],null]],[13],[1,"\\n      "],[10,0],[14,0,"assign-name"],[12],[1,[33,7,["name"]]],[13],[1,"\\n    "],[13],[1,"\\n\\n    "],[10,0],[14,0,"assign-count"],[12],[1,"\\n      "],[1,[33,7,["assignments_count"]]],[1,"\\n    "],[13],[1,"\\n"]],[]]]]]],[]],[[[41,[33,10],[[[6,[39,2],null,[["query","route","model"],[[28,[37,3],null,[["order","ascending","search"],[[33,4],[33,5],[33,6]]]],"group.assigned.show",[33,7]]],[["default"],[[[[1,"    "],[10,0],[14,0,"assign-image"],[12],[1,"\\n      "],[1,[28,[35,11],["group-plus"],null]],[1,"\\n    "],[13],[1,"\\n    "],[10,0],[14,0,"assign-names"],[12],[1,"\\n      "],[10,0],[14,0,"assign-username"],[12],[1,[34,10]],[13],[1,"\\n    "],[13],[1,"\\n\\n    "],[10,0],[14,0,"assign-count"],[12],[1,"\\n      "],[1,[34,12]],[1,"\\n    "],[13],[1,"\\n"]],[]]]]]],[]],[[[6,[39,2],null,[["query","route","model"],[[28,[37,3],null,[["order","ascending","search"],[[33,4],[33,5],[33,6]]]],"group.assigned.show",[33,7]]],[["default"],[[[[1,"    "],[10,0],[14,0,"assign-everyone"],[12],[1,"\\n      "],[1,[28,[35,13],["discourse_assign.group_everyone"],null]],[1,"\\n    "],[13],[1,"\\n    "],[10,0],[14,0,"assign-count"],[12],[1,"\\n      "],[1,[34,12]],[1,"\\n    "],[13],[1,"\\n"]],[]]]]]],[]]]],[]]]],[],false,["if","showAvatar","link-to","-hash","order","ascending","search","filter","avatar","format-username","groupName","d-icon","assignmentCount","i18n"]]',moduleName:"javascripts/discourse/templates/components/group-assigned-filter",isStrictMode:!1}),Ember.TEMPLATES["javascripts/components/group-assigned-menu-item"]=Ember.HTMLBars.template({id:null,block:'[[[6,[39,0],null,[["route"],["group.assigned"]],[["default"],[[[[1,"  "],[1,[28,[35,1],["user-plus"],[["class"],["glyph"]]]],[1,[28,[35,2],["discourse_assign.assigned"],null]],[1," ("],[1,[33,3,["assignment_count"]]],[1,")\\n"]],[]]]]]],[],false,["link-to","d-icon","i18n","group"]]',moduleName:"javascripts/discourse/templates/components/group-assigned-menu-item",isStrictMode:!1}),Ember.TEMPLATES["javascripts/components/remind-assigns-frequency"]=Ember.HTMLBars.template({id:null,block:'[[[41,[33,1,["assign_enabled"]],[[[1,"  "],[10,0],[14,0,"controls controls-dropdown"],[12],[1,"\\n    "],[10,"label"],[12],[1,[28,[35,2],["discourse_assign.reminders_frequency.description"],null]],[13],[1,"\\n    "],[1,[28,[35,3],null,[["id","valueProperty","content","value","onChange"],["remind-assigns-frequency","value",[33,4],[33,5],[28,[37,6],[[30,0],[28,[37,7],[[33,8,["custom_fields","remind_assigns_frequency"]]],null]],null]]]]],[1,"\\n  "],[13],[1,"\\n"]],[]],null]],[],false,["if","siteSettings","i18n","combo-box","availableFrequencies","selectedFrequency","action","mut","user"]]',moduleName:"javascripts/discourse/templates/components/remind-assigns-frequency",isStrictMode:!1}),Ember.TEMPLATES["javascripts/group-topics-list"]=Ember.HTMLBars.template({id:null,block:'[[[10,0],[14,0,"topic-search-div"],[12],[1,"\\n  "],[10,0],[14,0,"inline-form full-width"],[12],[1,"\\n    "],[1,[28,[35,0],null,[["class","value","placeholder","input","autocomplete","type"],["no-blur",[28,[37,1],[[33,2]],null],[28,[37,3],["discourse_assign.topic_search_placeholder"],null],[28,[37,4],[[30,0],"onChangeFilter"],[["value"],["target.value"]]],"off","search"]]]],[1,"\\n  "],[13],[1,"\\n"],[13],[1,"\\n"],[6,[39,5],null,[["class","selector","action"],["paginated-topics-list",".paginated-topics-list .topic-list tr",[28,[37,4],[[30,0],"loadMore"],null]]],[["default"],[[[[1,"\\n  "],[1,[28,[35,6],null,[["topicList","hideCategory","showPosters","bulkSelectEnabled","canBulkSelect","selected","hasIncoming","incomingCount","showInserted","tagsForUser","changeSort","toggleBulkSelect","bulkSelectAction","unassign","reassign","onScroll","scrollOnLoad"],[[33,7],[33,8],[33,9],[33,10],[33,11],[33,12],[33,13],[33,14],[28,[37,4],[[30,0],"showInserted"],null],[33,15],[28,[37,4],[[30,0],"changeSort"],null],[28,[37,4],[[30,0],"toggleBulkSelect"],null],[28,[37,4],[[30,0],"refresh"],null],[28,[37,4],[[30,0],"unassign"],null],[28,[37,4],[[30,0],"reassign"],null],[33,16],true]]]],[1,"\\n\\n  "],[1,[28,[35,17],null,[["condition"],[[33,7,["loadingMore"]]]]]],[1,"\\n"]],[]]]]]],[],false,["input","readonly","search","i18n","action","load-more","basic-assigned-topic-list","model","hideCategory","showPosters","bulkSelectEnabled","canBulkSelect","selected","hasIncoming","incomingCount","tagsForUser","saveScrollPosition","conditional-loading-spinner"]]',moduleName:"javascripts/discourse/templates/group-topics-list",isStrictMode:!1}),Ember.TEMPLATES["javascripts/group/assigned"]=Ember.HTMLBars.template({id:null,block:'[[[10,"section"],[14,0,"user-secondary-navigation group-assignments"],[12],[1,"\\n"],[6,[39,0],null,[["class","desktopClass"],["activity-nav","action-list activity-list nav-stacked"]],[["default"],[[[[41,[33,2],[[[1,"      "],[10,0],[14,0,"search-div"],[12],[1,"\\n        "],[1,[28,[35,3],null,[["type","placeholder","value","class","input"],["text",[28,[37,4],["discourse_assign.sidebar_name_filter_placeholder"],null],[28,[37,5],[[33,6]],null],"search",[28,[37,7],[[30,0],"onChangeFilterName"],[["value"],["target.value"]]]]]]],[1,"\\n      "],[13],[1,"\\n"]],[]],null],[6,[39,8],null,[["selector","action"],[".activity-nav li",[28,[37,7],[[30,0],"loadMore"],null]]],[["default"],[[[[1,"      "],[1,[28,[35,9],null,[["showAvatar","filter","routeType","assignmentCount","search","ascending","order"],[false,"everyone",[33,10],[33,11,["assignment_count"]],[33,12],[33,13],[33,14]]]]],[1,"\\n      "],[1,[28,[35,9],null,[["showAvatar","groupName","filter","routeType","assignmentCount","search","ascending","order"],[false,[33,11,["name"]],[33,11,["name"]],[33,10],[33,11,["group_assignment_count"]],[33,12],[33,13],[33,14]]]]],[1,"\\n"],[42,[28,[37,16],[[28,[37,16],[[33,17]],null]],null],null,[[[1,"        "],[1,[28,[35,9],null,[["showAvatar","filter","routeType","search","ascending","order"],[true,[30,1],[33,10],[33,12],[33,13],[33,14]]]]],[1,"\\n"]],[1]],null],[1,"      "],[1,[28,[35,18],null,[["condition"],[[33,19]]]]],[1,"\\n"]],[]]]]]],[]]]]],[13],[1,"\\n"],[10,"section"],[14,0,"user-content"],[12],[1,"\\n  "],[46,[28,[37,21],null,null],null,null,null],[1,"\\n"],[13],[1,"\\n"]],["member"],false,["mobile-nav","if","isDesktop","input","i18n","readonly","filterName","action","load-more","group-assigned-filter","route_type","group","search","ascending","order","each","-track-array","members","conditional-loading-spinner","loading","component","-outlet"]]',moduleName:"javascripts/discourse/templates/group/assigned",isStrictMode:!1}),Ember.TEMPLATES["javascripts/mobile/components/assigned-topic-list-item"]=Ember.HTMLBars.template({id:null,block:'[[[10,"td"],[14,0,"topic-list-data"],[12],[1,"\\n  "],[10,0],[14,0,"main-link"],[12],[1,"\\n    "],[1,[28,[35,0],null,[["topic"],[[33,1]]]]],[41,[33,3],[[[1,[28,[35,4],["envelope"],[["class"],["private-message-icon"]]]]],[]],null],[1,[28,[35,5],[[33,1]],null]],[1,"\\n"],[41,[33,1,["unseen"]],[[[1,"      "],[10,1],[14,0,"badge-notification new-topic"],[12],[13],[1,"\\n"]],[]],null],[41,[33,1,["hasExcerpt"]],[[[1,"      "],[10,0],[14,0,"topic-excerpt"],[12],[1,"\\n        "],[1,[28,[35,6],[[33,1,["excerpt"]]],null]],[1,"\\n"],[41,[33,1,["excerptTruncated"]],[[[1,"          "],[41,[51,[33,1,["canClearPin"]]],[[[10,3],[15,6,[33,1,["url"]]],[12],[1,[28,[35,8],["read_more"],null]],[13]],[]],null],[1,"\\n"]],[]],null],[41,[33,1,["canClearPin"]],[[[1,"          "],[11,3],[24,6,""],[16,"title",[28,[37,8],["topic.clear_pin.help"],null]],[4,[38,9],[[30,0],"clearPin",[33,1]],null],[12],[1,[28,[35,8],["topic.clear_pin.title"],null]],[13],[1,"\\n"]],[]],null],[1,"      "],[13],[1,"\\n"]],[]],null],[1,"  "],[13],[1,"\\n  "],[10,0],[14,0,"pull-right topic-list-num"],[12],[1,"\\n"],[41,[33,1,["assigned_to_user"]],[[[1,"      "],[1,[28,[35,10],null,[["topic","assignee","unassign","reassign"],[[33,1],[33,1,["assigned_to_user","username"]],[33,11],[33,12]]]]],[1,"\\n"]],[]],[[[41,[33,1,["assigned_to_group"]],[[[1,"      "],[1,[28,[35,10],null,[["topic","assignee","group","unassign","reassign"],[[33,1],[33,1,["assigned_to_group","name"]],true,[33,11],[33,12]]]]],[1,"\\n"]],[]],[[[1,"      "],[1,[28,[35,10],null,[["topic","unassign"],[[33,1],[33,11]]]]],[1,"\\n    "]],[]]]],[]]],[1,"  "],[13],[1,"\\n  "],[10,0],[14,0,"clearfix"],[12],[13],[1,"\\n  "],[10,0],[14,0,"topic-item-stats clearfix"],[12],[1,"\\n    "],[1,[28,[35,13],[[33,1]],[["mode","tagsForUser"],["list",[33,14]]]]],[1,"\\n    "],[10,0],[14,0,"pull-right topic-list-num"],[12],[1,"\\n      "],[1,[28,[35,15],["list/activity-column"],[["topic","tagName","class"],[[33,1],"div","num activity last"]]]],[1,"\\n      "],[10,3],[15,6,[33,1,["lastPostUrl"]]],[15,"title",[29,[[28,[37,8],["last_post"],null],": ",[28,[37,6],[[33,16],[33,1,["bumped_at"]]],null]]]],[12],[1,[33,1,["last_poster_username"]]],[13],[1,"\\n    "],[13],[1,"\\n"],[41,[51,[33,17]],[[[1,"      "],[10,0],[14,0,"category"],[12],[1,"\\n        "],[1,[28,[35,18],[[33,1,["category"]]],null]],[1,"\\n      "],[13],[1,"\\n"]],[]],null],[1,"    "],[10,0],[14,0,"clearfix"],[12],[13],[1,"\\n  "],[13],[1,"\\n"],[13],[1,"\\n"]],[],false,["topic-status","topic","if","isPrivateMessage","d-icon","topic-link","html-safe","unless","i18n","action","assign-actions-dropdown","unassign","reassign","discourse-tags","tagsForUser","raw","raw-date","hideCategory","category-link"]]',moduleName:"javascripts/discourse/templates/mobile/components/assigned-topic-list-item",isStrictMode:!1}),Ember.TEMPLATES["javascripts/mobile/components/basic-assigned-topic-list"]=Ember.HTMLBars.template({id:null,block:'[[[6,[39,0],null,[["condition"],[[33,1]]],[["default"],[[[[41,[33,3],[[[1,"    "],[10,0],[14,0,"show-mores"],[12],[1,"\\n      "],[11,3],[24,6,""],[24,0,"alert alert-info clickable"],[4,[38,4],[[30,0],[33,5]],null],[12],[1,"\\n        "],[1,[28,[35,6],null,[["key","suffix","count"],["topic_count_","latest",[33,7]]]]],[1,"\\n      "],[13],[1,"\\n    "],[13],[1,"\\n"]],[]],null],[1,"\\n"],[41,[33,8],[[[1,"    "],[10,"table"],[14,0,"topic-list assigned-topic-list"],[12],[1,"\\n      "],[10,"tbody"],[14,0,"topic-list-body assigned-topic-list-body"],[12],[1,"\\n"],[42,[28,[37,10],[[28,[37,10],[[33,8]],null]],null],null,[[[1,"          "],[1,[28,[35,11],null,[["topic","expandGloballyPinned","expandAllPinned","lastVisitedTopic","selected","tagsForUser","unassign","reassign"],[[30,1],[33,12],[33,13],[33,14],[33,15],[33,16],[33,17],[33,18]]]]],[1,"\\n"]],[1]],null],[1,"      "],[13],[1,"\\n    "],[13],[1,"\\n"]],[]],[[[1,"    "],[10,0],[14,0,"alert alert-info"],[12],[1,"\\n      "],[1,[28,[35,19],["choose_topic.none_found"],null]],[1,"\\n    "],[13],[1,"\\n"]],[]]]],[]]]]]],["t"],false,["conditional-loading-spinner","loading","if","hasIncoming","action","showInserted","count-i18n","incomingCount","topics","each","-track-array","assigned-topic-list-item","expandGloballyPinned","expandAllPinned","lastVisitedTopic","selected","tagsForUser","unassign","reassign","i18n"]]',moduleName:"javascripts/discourse/templates/mobile/components/basic-assigned-topic-list",isStrictMode:!1}),Ember.TEMPLATES["javascripts/modal/assign-user"]=Ember.HTMLBars.template({id:null,block:'[[[6,[39,0],null,[["class"],["assign"]],[["default"],[[[[1,"  "],[10,0],[12],[1,"\\n    "],[10,2],[12],[1,[28,[35,1],[[33,2,["description"]]],null]],[13],[1,"\\n    "],[1,[28,[35,3],null,[["autocomplete","value","onChange","autofocus","options"],["off",[33,4],[28,[37,5],[[30,0],"assignUsername"],null],"autofocus",[28,[37,6],null,[["mobilePlacementStrategy","filterPlaceholder","includeGroups","customSearchOptions","groupMembersOf","maximum","autofocus","tabindex"],["absolute",[33,7],true,[28,[37,6],null,[["assignableGroups"],[true]]],[33,8],1,[33,9],1]]]]]]],[1,"\\n    "],[10,0],[14,0,"assign-suggestions"],[12],[1,"\\n"],[42,[28,[37,11],[[28,[37,11],[[33,12]],null]],null],null,[[[1,"        "],[11,3],[24,6,""],[4,[38,5],[[30,0],"assignUser",[30,1,["username"]]],null],[12],[1,"\\n          "],[1,[28,[35,13],[[30,1]],[["imageSize"],["small"]]]],[1,"\\n          "],[1,[28,[35,14],[[30,1,["username"]]],null]],[1,"\\n        "],[13],[1,"\\n"]],[1]],null],[1,"    "],[13],[1,"\\n    "],[10,"label"],[12],[1,[28,[35,1],["discourse_assign.assign_modal.note_label"],null]],[13],[1,"\\n    "],[1,[28,[35,15],null,[["value"],[[33,2,["note"]]]]]],[1,"\\n  "],[13],[1,"\\n"]],[]]]]],[1,"\\n"],[10,0],[14,0,"modal-footer"],[12],[1,"\\n  "],[1,[28,[35,16],null,[["label","icon","action","class","disabled"],[[52,[33,2,["reassign"]],"discourse_assign.reassign.title","discourse_assign.assign_modal.assign"],[33,18],[28,[37,5],[[30,0],"assign"],null],"btn-primary",[33,19]]]]],[1,"\\n"],[13],[1,"\\n"]],["user"],false,["d-modal-body","i18n","model","email-group-user-chooser","assigneeName","action","hash","placeholderKey","allowedGroups","autofocus","each","-track-array","assignSuggestions","avatar","decorate-username-selector","textarea","d-button","if","inviteIcon","disabled"]]',moduleName:"javascripts/discourse/templates/modal/assign-user",isStrictMode:!1}),Ember.TEMPLATES["javascripts/user-activity-assigned"]=Ember.HTMLBars.template({id:null,block:'[[[46,[28,[37,1],null,null],null,null,null],[1,"\\n"]],[],false,["component","-outlet"]]',moduleName:"javascripts/discourse/templates/user-activity-assigned",isStrictMode:!1}),Ember.TEMPLATES["javascripts/user-assigned-topics"]=Ember.HTMLBars.template({id:null,block:'[[[41,[33,1],[[[1,"  "],[8,[39,2],null,[["@title","@body"],[[28,[37,3],["user.no_assignments_title"],null],[99,4,["@body"]]]],null],[1,"\\n"]],[]],[[[1,"  "],[10,0],[14,0,"topic-search-div"],[12],[1,"\\n    "],[10,0],[14,0,"inline-form full-width"],[12],[1,"\\n      "],[1,[28,[35,5],null,[["class","value","placeholder","input","autocomplete","type"],["no-blur",[28,[37,6],[[33,7]],null],[28,[37,3],["discourse_assign.topic_search_placeholder"],null],[28,[37,8],[[30,0],"onChangeFilter"],[["value"],["target.value"]]],"off","search"]]]],[1,"\\n    "],[13],[1,"\\n  "],[13],[1,"\\n\\n"],[6,[39,9],null,[["class","selector","action"],["paginated-topics-list",".paginated-topics-list .topic-list tr",[28,[37,8],[[30,0],"loadMore"],null]]],[["default"],[[[[1,"    "],[1,[28,[35,10],null,[["topicList","hideCategory","showPosters","bulkSelectEnabled","selected","hasIncoming","incomingCount","showInserted","tagsForUser","changeSort","unassign","reassign","onScroll","scrollOnLoad"],[[33,11],[33,12],true,[33,13],[33,14],[33,15],[33,16],[28,[37,8],[[30,0],"showInserted"],null],[33,17],[28,[37,8],[[30,0],"changeSort"],null],[28,[37,8],[[30,0],"unassign"],null],[28,[37,8],[[30,0],"reassign"],null],[33,18],true]]]],[1,"\\n\\n    "],[1,[28,[35,19],null,[["condition"],[[33,11,["loadingMore"]]]]]],[1,"\\n"]],[]]]]]],[]]]],[],false,["if","doesntHaveAssignments","empty-state","i18n","emptyStateBody","input","readonly","search","action","load-more","basic-assigned-topic-list","model","hideCategory","bulkSelectEnabled","selected","hasIncoming","incomingCount","tagsForUser","saveScrollPosition","conditional-loading-spinner"]]',moduleName:"javascripts/discourse/templates/user-assigned-topics",isStrictMode:!1}),define("discourse/plugins/discourse-assign/discourse/widgets/quick-access-assignments",["discourse/widgets/raw-html","discourse-common/lib/icon-library","discourse/widgets/widget","discourse-common/lib/get-url","discourse/lib/utilities","virtual-dom","I18n","@ember/template"],(function(e,s,t,n,i,r,o,a){"use strict";var l="user-plus";(0,t.createWidget)("no-quick-access-assignments",{html:function(){return(0,r.h)("div.empty-state",[(0,r.h)("span.empty-state-title",o.default.t("user.no_assignments_title")),(0,r.h)("div.empty-state-body",new e.default({html:"<p>"+(0,a.htmlSafe)(o.default.t("user.no_assignments_body",{preferencesUrl:(0,n.default)("/my/preferences/notifications"),icon:(0,s.iconHTML)(l)}))+"</p>"}))])}});var u=(0,t.queryRegistry)("quick-access-panel");u&&(0,t.createWidgetFrom)(u,"quick-access-assignments",{buildKey:function(){return"quick-access-assignments"},emptyStateWidget:"no-quick-access-assignments",showAllHref:function(){return"".concat(this.attrs.path,"/activity/assigned")},findNewItems:function(){return this.store.findFiltered("topicList",{filter:"topics/messages-assigned/".concat(this.currentUser.username_lower),params:{exclude_category_ids:[-1]}}).then((function(e){return e.topic_list.topics}))},itemHtml:function(e){return this.attach("quick-access-item",{icon:e.assigned_to_group?"group-plus":l,href:(0,i.postUrl)(e.slug,e.id,e.last_read_post_number+1),escapedContent:e.fancy_title})}})}));
//# sourceMappingURL=discourse-assign-ee82a36362d2af83b00285d8144d73a6df7661ee69d8048866af970708941741.js.map